<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tee-Time Decision Strip - Test Scenarios (v2 - Date Selection)</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Inter, system-ui, -apple-system, sans-serif;
      background: #E4EEE9;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    h1, h2 { color: #071512; }
    .scenario {
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 4px 20px rgba(6,24,20,.12);
    }
    .scenario h3 {
      margin-top: 0;
      color: #0F766E;
    }
    .input-data, .output-data {
      background: #f5f5f5;
      border-radius: 8px;
      padding: 12px;
      margin: 12px 0;
      font-family: monospace;
      font-size: 13px;
      overflow-x: auto;
    }
    .output-data { background: #e8f5e9; }
    .output-data.risky { background: #fff8e1; }
    .output-data.no-chance { background: #ffebee; }
    .status-play { color: #15803d; font-weight: bold; }
    .status-risky { color: #a16207; font-weight: bold; }
    .status-no-chance { color: #dc2626; font-weight: bold; }
    pre { margin: 0; white-space: pre-wrap; }
    .result { margin-top: 10px; padding: 10px; border-left: 4px solid #0F766E; }
    .result.risky { border-left-color: #f59e0b; }
    .result.no-chance { border-left-color: #dc2626; }
    .new-badge {
      display: inline-block;
      background: #0F766E;
      color: white;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: bold;
      margin-left: 8px;
    }
  </style>
</head>
<body>
  <h1>ğŸŒï¸ Tee-Time Decision Strip v2 <span class="new-badge">DATE SELECTION</span></h1>
  <p>This page demonstrates the upgraded Tee-Time Decision Strip with date + time selection and 3-hour round evaluation.</p>

  <div class="scenario">
    <h3>ğŸ†• New Features</h3>
    <ul>
      <li><strong>Date Selection:</strong> Horizontal date chips (Today, Tomorrow, Sat 6, etc.)</li>
      <li><strong>3-Hour Round:</strong> Evaluation window changed from 4h to 3h</li>
      <li><strong>Daylight Enforcement:</strong> Tee time + 3h must be inside daylight</li>
      <li><strong>Forecast Days:</strong> Supports up to 7 days (or 5 if limited)</li>
      <li><strong>Smart Time Snapping:</strong> When switching dates, snaps to nearest valid time</li>
    </ul>
  </div>

  <div class="scenario">
    <h3>Scenario 1: PLAY - Perfect Morning Round (Saturday)</h3>
    <p>A beautiful Saturday morning with minimal rain chance and light winds.</p>
    
    <div class="input-data">
      <strong>Input Forecast (3-hour window from 09:00):</strong>
      <pre>
[
  { timeISO: "2026-01-03T09:00:00Z", tempC: 16, feelsLikeC: 15, windMph: 7, gustMph: 11, precipProbPct: 5, precipMm: 0 },
  { timeISO: "2026-01-03T10:00:00Z", tempC: 18, feelsLikeC: 17, windMph: 9, gustMph: 13, precipProbPct: 8, precipMm: 0 },
  { timeISO: "2026-01-03T11:00:00Z", tempC: 19, feelsLikeC: 18, windMph: 8, gustMph: 12, precipProbPct: 5, precipMm: 0 }
]

Daylight: Sunrise 07:45, Sunset 16:30
Selected Date: Sat 3 Jan
Selected Time: 09:00
      </pre>
    </div>
    
    <div class="output-data">
      <strong>Expected Output:</strong>
      <div class="result">
        <p><span class="status-play">âœ… PLAY</span></p>
        <p><strong>Metrics (3h window):</strong></p>
        <ul>
          <li>Rain: 8% (max probability)</li>
          <li>Wind: 8 mph (average)</li>
          <li>Temp: 18Â°C (average)</li>
          <li>Gusts: 13 mph (max)</li>
        </ul>
        <p><strong>Summary:</strong> "Dry window likely. Light winds."</p>
        <p><strong>Round ends:</strong> 12:00 (within daylight âœ“)</p>
      </div>
    </div>
  </div>

  <div class="scenario">
    <h3>Scenario 2: RISKY - Sunday Afternoon Showers</h3>
    <p>Showers possible with gusty winds. Playable but challenging.</p>
    
    <div class="input-data">
      <strong>Input Forecast (3-hour window from 14:00):</strong>
      <pre>
[
  { timeISO: "2026-01-04T14:00:00Z", tempC: 14, feelsLikeC: 12, windMph: 17, gustMph: 27, precipProbPct: 50, precipMm: 0.3 },
  { timeISO: "2026-01-04T15:00:00Z", tempC: 13, feelsLikeC: 10, windMph: 19, gustMph: 29, precipProbPct: 60, precipMm: 0.5 },
  { timeISO: "2026-01-04T16:00:00Z", tempC: 13, feelsLikeC: 9, windMph: 18, gustMph: 26, precipProbPct: 55, precipMm: 0.4 }
]

Daylight: Sunrise 07:46, Sunset 16:31
Selected Date: Sun 4 Jan
Selected Time: 14:00
      </pre>
    </div>
    
    <div class="output-data risky">
      <strong>Expected Output:</strong>
      <div class="result risky">
        <p><span class="status-risky">âš ï¸ RISKY</span></p>
        <p><strong>Metrics (3h window):</strong></p>
        <ul>
          <li>Rain: 60% (max probability)</li>
          <li>Wind: 18 mph (average)</li>
          <li>Temp: 13Â°C (average)</li>
          <li>Gusts: 29 mph (max)</li>
        </ul>
        <p><strong>Summary:</strong> "Showers possible. Gusty crosswinds."</p>
        <p><strong>Reasons:</strong></p>
        <ul>
          <li>Rain chance 60%</li>
          <li>Gusty winds (up to 29mph)</li>
          <li>Strong sustained wind (~18mph)</li>
        </ul>
        <p><strong>Round ends:</strong> 17:00 (after sunset âš ï¸ - this time would be invalid)</p>
        <p><em>Note: In practice, 14:00 would not be offered as a valid tee time since round ends after sunset.</em></p>
      </div>
    </div>
  </div>

  <div class="scenario">
    <h3>Scenario 3: NO CHANCE - Monday Storm</h3>
    <p>Heavy persistent rain with dangerous gusts. Not playable.</p>
    
    <div class="input-data">
      <strong>Input Forecast (3-hour window from 10:00):</strong>
      <pre>
[
  { timeISO: "2026-01-05T10:00:00Z", tempC: 7, feelsLikeC: 2, windMph: 29, gustMph: 43, precipProbPct: 92, precipMm: 2.8 },
  { timeISO: "2026-01-05T11:00:00Z", tempC: 7, feelsLikeC: 1, windMph: 31, gustMph: 46, precipProbPct: 95, precipMm: 3.2 },
  { timeISO: "2026-01-05T12:00:00Z", tempC: 8, feelsLikeC: 3, windMph: 27, gustMph: 39, precipProbPct: 88, precipMm: 2.0 }
]

Daylight: Sunrise 07:46, Sunset 16:32
Selected Date: Mon 5 Jan
Selected Time: 10:00
      </pre>
    </div>
    
    <div class="output-data no-chance">
      <strong>Expected Output:</strong>
      <div class="result no-chance">
        <p><span class="status-no-chance">â›” NO CHANCE</span></p>
        <p><strong>Metrics (3h window):</strong></p>
        <ul>
          <li>Rain: 95% (max probability)</li>
          <li>Wind: 29 mph (average)</li>
          <li>Temp: 7Â°C (average)</li>
          <li>Gusts: 46 mph (max)</li>
        </ul>
        <p><strong>Summary:</strong> "Persistent rain. Strong gustsâ€”expect disruption."</p>
        <p><strong>Reasons:</strong></p>
        <ul>
          <li>Heavy rain expected (~8.0mm)</li>
          <li>Dangerous gusts (up to 46mph)</li>
        </ul>
        <p><strong>Round ends:</strong> 13:00 (within daylight âœ“, but weather is terrible)</p>
      </div>
    </div>
  </div>

  <h2>Decision Logic Reference (3-Hour Window)</h2>
  <div class="scenario">
    <h3>Thresholds (Easy to Tweak)</h3>
    <div class="input-data">
      <pre>
// Round duration: 3 hours (ROUND_DURATION_HOURS = 3)

// NO CHANCE if any of:
- totalPrecipMm >= 4.0
- maxPrecipProb >= 80 AND totalPrecipMm >= 1.5
- maxGust >= 35 mph

// RISKY if not NO CHANCE and any of:
- totalPrecipMm between 1.5 and 4.0
- maxPrecipProb between 50 and 79
- maxGust between 25 and 34 mph
- avgWind >= 18 mph

// PLAY otherwise

// DAYLIGHT ENFORCEMENT:
- Tee time must be after sunrise + 30min
- Round must end before sunset
- Fallback if no sunrise/sunset: 08:00 - 17:00
      </pre>
    </div>
  </div>

  <h2>Helper Functions</h2>
  <div class="scenario">
    <h3>JavaScript API</h3>
    <div class="input-data">
      <pre>
// Get number of forecast days available (max 7)
getForecastDaysAvailable(norm) â†’ number

// Get daylight window for a specific date
getDaylightWindowForDate(date, norm) â†’ { sunrise: unixSeconds, sunset: unixSeconds }

// Get valid tee times for a date (daylight-only, 3h round fits)
getValidTeeTimesForDate(date, norm, stepMinutes = 30) â†’ [{ value: unixSeconds, label: "HH:MM" }]

// Get available dates with valid tee times
getAvailableDates(norm) â†’ [{ date: Date, label: "Today", hasValidTimes: boolean }]

// Calculate decision for a tee time (3h window)
computeTeeTimeDecision(forecast, teeTimeUnix, windowHours = 3) â†’ {
  status: "PLAY" | "RISKY" | "NO_CHANCE",
  statusLabel: "PLAY" | "RISKY" | "NO CHANCE",
  icon: "âœ…" | "âš ï¸" | "â›”",
  metrics: {
    maxPrecipProb: number,
    totalPrecipMm: number,
    avgWind: number,
    maxGust: number,
    avgTemp: number,
    feelsLike: number
  },
  reasons: string[],
  summary: string
}
      </pre>
    </div>
  </div>

  <h2>UI Layout (Mobile-First)</h2>
  <div class="scenario">
    <div class="input-data">
      <pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [âœ… PLAY]    [Today] [Tmrw] [Sat 3] [Sun 4]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ• Tee Time              [09:00 â–¼]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ§ï¸ Rain   ğŸ’¨ Wind   ğŸŒ¡ï¸ Temp   ğŸ’¥ Gusts        â”‚
â”‚    8%       8 mph    18Â°C     13 mph            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Dry window likely. Light winds.                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Mobile View (stacked):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     [âœ… PLAY]       â”‚
â”‚ [Today][Tmrw][Sat]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ• Tee Time       â”‚
â”‚   [  09:00  â–¼ ]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŒ§ï¸ 8%  â”‚ ğŸ’¨ 8 mph  â”‚
â”‚ ğŸŒ¡ï¸ 18Â° â”‚ ğŸ’¥ 13 mph â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Dry window likely.  â”‚
â”‚ Light winds.        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      </pre>
    </div>
  </div>

  <h2>Integration Notes</h2>
  <div class="scenario">
    <p><strong>Key UX Principle:</strong></p>
    <blockquote style="background: #e8f5e9; padding: 12px; border-radius: 8px; font-style: italic;">
      "If I tee off at THIS time on THIS day â€” should we play?"
    </blockquote>
    
    <p><strong>The component will NEVER:</strong></p>
    <ul>
      <li>âŒ Recommend night golf</li>
      <li>âŒ Allow rounds ending after sunset</li>
      <li>âŒ Show dates beyond forecast capability</li>
      <li>âŒ Offer times where 3-hour round doesn't fit in daylight</li>
    </ul>
    
    <p><strong>Smart Time Snapping:</strong></p>
    <ul>
      <li>If user selects 10:00 on Saturday, then switches to Sunday...</li>
      <li>...and 10:00 is valid on Sunday â†’ stays at 10:00</li>
      <li>...and 10:00 is NOT valid â†’ snaps to nearest valid time</li>
    </ul>
    
    <p><strong>Accessibility features:</strong></p>
    <ul>
      <li>Date chips: role="group" + aria-label="Select date"</li>
      <li>Time selector: aria-label="Select tee time"</li>
      <li>Disabled chips marked with aria-disabled</li>
      <li>Icon + text (color not sole indicator)</li>
    </ul>
  </div>

  <script>
    console.log("ğŸŒï¸ Tee-Time Decision Strip v2 Test Scenarios");
    console.log("=============================================");
    console.log("");
    console.log("New in v2:");
    console.log("  â€¢ Date chip selector (Today, Tomorrow, Sat 6...)");
    console.log("  â€¢ 3-hour round window (was 4h)");
    console.log("  â€¢ Daylight-only enforcement");
    console.log("  â€¢ Smart time snapping when switching dates");
    console.log("");
    console.log("Open the main app (index.html) to see the component in action.");
  </script>
</body>
</html>
